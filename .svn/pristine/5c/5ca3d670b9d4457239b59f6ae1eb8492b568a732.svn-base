{"version":3,"sources":["../../src/pages/app-form/normal-app/app-history/app-history.module.ts","../../src/pages/app-form/normal-app/app-history/app-history.ts"],"names":[],"mappings":"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","file":"49.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AppHistoryPage } from './app-history';\n\n@NgModule({\n  declarations: [\n    //AppHistoryPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AppHistoryPage),\n  ],\n})\nexport class AppHistoryPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/app-form/normal-app/app-history/app-history.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, Content } from 'ionic-angular';\nimport { FormBuilder, Validators, FormGroup, FormArray, FormControl} from '@angular/forms';\nimport { ApplicationData } from '../../../../providers/application/application-data';\nimport { HttpClient } from '@angular/common/http';\nimport { ApplicationMasterM } from '../../../../providers/application/application-master-model';\nimport moment from 'moment';\n@IonicPage()\n@Component({\n  selector: 'page-app-history',\n  templateUrl: 'app-history.html',\n})\nexport class AppHistoryPage {\n  appHistory: FormGroup;\n  private companyDropdown;\n  private maxDate;\n  constructor(\n    private content: Content,\n    private fb: FormBuilder,\n    private http: HttpClient,\n    private appsData: ApplicationData) {\n    this.maxDate = moment().format('YYYY-MM-DD');\n    this.appHistory = this.fb.group({\n\n      otherinsuranceyn: [null, Validators.required],\n      insurancerejectionflag: [null, Validators.required],\n\n      insuranceRejectionData: this.fb.array([]),\n      otherInsuranceData: this.fb.array([]),\n  });\n\n    this.http.get('assets/json/application/companyJson.json')\n    .subscribe(data => {\n      this.companyDropdown = data;\n      this.companyDropdown = this.companyDropdown.company;\n     });\n    // ส่งข้อมูลไปเก็บที่ provider\n    this.appsData.appHistory = this.appHistory;\n  }\n\n\n  ngOnInit() {\n\n    //get data for edit\n    this.appsData.getData().then((res: ApplicationMasterM) => {\n      if(res) {\n\n        if(res.mcaapplicationM){\n\n          this.appHistory.get('otherinsuranceyn').setValue(res.mcaapplicationM.otherinsuranceyn);\n          this.appHistory.get('insurancerejectionflag').setValue(res.mcaapplicationM.insurerejectionflag);\n        }\n\n        if (res.otherinsuranceMs.length > 0) {\n          for(let data of res.otherinsuranceMs){\n            this.addOtherInsuranceData(data);\n          }\n        }\n\n        if (res.insurancerejectionsMs.length > 0) {\n          for (let data of res.insurancerejectionsMs) {\n            this.addInsuranceRejection(data);\n          }\n        }\n      }\n    }, \n    (err)=> {\n      console.log('Err : ', err);\n    });\n  }\n\n  get other_insurance_yn() {\n    return this.appHistory.get('other_insurance_yn');\n  }\n\n  scrollToCenter () {\n    this.content.scrollTo(0, 100, 500);\n  }\n  scrollToBot () {\n    this.content.scrollTo(0, 300, 500);\n  }\n\n  private otherInsuranceDataSumRows(data?: any): FormGroup {\n\n    return this.fb.group({\n\n      company: [data ? data.companycode == '99' ? data.companycode+':อื่นๆ' : (data.companycode == '' && data.company == '' ? '' : data.companycode + ':' + data.company) : '', Validators.required],\n      company_desc : [{value : data ? data.companydesc : '', disabled: data ? data.companycode != '99' : true}, Validators.required],\n      accident_amount : [data ? data.accidentamount : '', Validators.required],\n      life_amount : [data ? data.lifeamount : '', Validators.required],\n      compensation_daily : [data ? data.compensationdaily : '', Validators.required],\n      critical_illness_amount : [data ? data.criticalillnessamount : '', Validators.required],\n      contract_effective_flag : [data ? data.contracteffectiveflag : '', Validators.required],\n      typeform: data ? data.typeform : 'PER'// PER=ทั่วไป, KB=คบ\n\n    });\n  }\n\n  /**\n   * เพิ่ม ประวัตฺการถูกปฏิเสธ\n   */\n  private addOtherInsuranceData(data?: any): void {\n    const control: FormArray = <FormArray>this.appHistory.controls['otherInsuranceData'];\n    control.push(this.otherInsuranceDataSumRows(data));\n  }\n\n  /**\n   * ลบ ประวัติการถูกปฏิเสธ\n   */\n  private removeOtherInsuranceData(index: number): void {\n    const control: FormArray = <FormArray>this.appHistory.controls['otherInsuranceData'];\n    control.removeAt(index);\n\n  }\n\n  /**\n   * ล้างค่า\n   */\n  private resetOtherInsuranceData(): void {\n\n    const control: FormArray = <FormArray>this.appHistory.controls['otherInsuranceData'];\n    while (control.length != 0) {\n      control.removeAt(0)\n    }\n  }\n\n  private insuranceRejectionSumRows(data?: any): FormGroup {\n\n    return this.fb.group({\n      //ชื่อบริษั่ทประกัน\n      company: [data ? data.companycode == '99' ? data.companycode+':อื่นๆ' : (data.companycode == '' && data.company == '' ? '' : data.companycode + ':' + data.company) : '', Validators.required],\n      // ชื่อบริษัทประกัน อื่นๆ\n      company_desc:  [{value : data ? data.companydesc : '', disabled: data ? data.companycode != '99' : true}, Validators.required],\n      reject_date: [data ? data.rejectdate : '', Validators.required],\n      description: [data ? data.description : '', Validators.required],\n      typeform: data ? data.typeform : 'PER'// PER=ทั่วไป, KB=คบ\n    });\n  }\n\n  /**\n   * เพิ่ม ประวัตฺการถูกปฏิเสธ\n   */\n  private addInsuranceRejection(data?: any): void {\n    const control: FormArray = <FormArray>this.appHistory.controls['insuranceRejectionData'];\n    control.push(this.insuranceRejectionSumRows(data));\n  }\n\n  /**\n   * ลบ ประวัติการถูกปฏิเสธ\n   */\n  private removeInsuranceRejection(index: number): void {\n    const control: FormArray = <FormArray>this.appHistory.controls['insuranceRejectionData'];\n    control.removeAt(index);\n  }\n\n  /**\n   * ล้างค่า\n   */\n  private resetInsuranceRejection(): void {\n\n    const control: FormArray = <FormArray>this.appHistory.controls['insuranceRejectionData'];\n    while (control.length != 0) {\n      control.removeAt(0)\n    }\n  }\n\n  /**\n   * เปลี่ยนค่า dropdown บริษัท\n   */\n  private companyChange(company: string, type: number, index: number) {\n\n    const control: FormArray = type == 1 ? <FormArray>this.appHistory.controls['otherInsuranceData'] : <FormArray>this.appHistory.controls['insuranceRejectionData'];\n    if (company == '99:อื่นๆ')\n      control.at(index).get('company_desc').enable();\n    else {\n      control.at(index).get('company_desc').setValue('');\n      control.at(index).get('company_desc').disable();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/app-form/normal-app/app-history/app-history.ts"],"sourceRoot":""}