{"version":3,"sources":["../../src/pages/investment/ulink-rider/ulink-rider.module.ts","../../src/pages/investment/ulink-rider/ulink-rider.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UlinkRiderPage } from './ulink-rider';\n\n@NgModule({\n  declarations: [\n  ],\n  imports: [\n    IonicPageModule.forChild(UlinkRiderPage),\n  ],\n})\nexport class UlinkRiderPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/investment/ulink-rider/ulink-rider.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, } from 'ionic-angular';\nimport { FormGroup, FormBuilder, FormArray } from '@angular/forms';\nimport { UlinkAppDataProvider } from '../../../providers/ulink-app-data/ulink-app-data';\nimport _ from \"lodash\";\nimport { Subscription } from 'rxjs';\nimport { Broadcaster } from '../../../providers/utility/broadcaster';\nimport { UnitlinkDataProvider } from '../../../providers/ulink-app-data/unitlink-data';\nimport { ListExampleRider } from '../../../providers/ulink-benefit/example-benefit-model/list-excample-rider';\nimport { LoadingDirective } from '../../../directives/extends/loading/loading';\n\n@IonicPage()\n@Component({\n  selector: 'page-ulink-rider',\n  templateUrl: 'ulink-rider.html',\n})\nexport class UlinkRiderPage {\n\n  private ulinkRider: FormGroup;\n  private sum: Number = 0;\n  private mode: Number = 0;\n\n  private subscription: Array<Subscription> = [];\n\n  /**\n   * สัญญาเพิ่มเติม\n   */\n  private rider: any = [];\n  private tlplan: any = {\n    planCode: 'UA02',\n    planName: 'ทีแอล ไลฟ์ โซลูชั่น 99/99 [UA02]',\n    pPayYear: '99',\n    pEndowmentYear: '99',\n    payType: 0,\n    endowmentType: '0',\n    calType: '2'\n  };\n\n  constructor(\n    private fb: FormBuilder,\n    public broadcaster:Broadcaster,\n    private loadingCtrl: LoadingDirective,\n    private ulinkAppDataProvider: UlinkAppDataProvider,\n    private unitlinkData: UnitlinkDataProvider) {\n\n      this.ulinkRider = this.fb.group({\n        // ประมาณการมูลค่ารับซื้อคืนหน่วยลงทุน\n        value: {value: null, disabled: true},\n        // รวมเบี้ยสัญญาเพิ่มเติม (ต่อปี) ณ ปีที่เริ่มหยุดพักชำระเบี้ย (บาท)\n        premium: {value: 0, disabled: true}\n      });\n\n      this.ulinkAppDataProvider.ulinkRider = this.ulinkRider;\n\n      this.mode = this.ulinkAppDataProvider.ulinkPayment.controls['mode'].value;\n      this.setSum();\n\n      if(this.unitlinkData.editData){\n        this.setEditData();\n      }\n\n      this.subscription.push(\n        this.broadcaster.on('investBenefitStep').subscribe(res => {\n          let chooseType = this.ulinkAppDataProvider.chooseType;\n          let planCode = this.ulinkAppDataProvider.planCode;\n  \n          if(planCode == 'UA02'){\n  \n            if((res == 3 && chooseType == 'health')\n            || (res == 4 && chooseType == 'self')\n            ){\n              this.calAV();\n            }\n          }\n        })\n      );\n      \n  }\n\n  ngAfterViewInit(): void {\n   \n    this.ulinkAppDataProvider.ulinkPayment.get('mode').valueChanges.subscribe(data => {\n      this.mode = data;\n    });\n\n    this.ulinkAppDataProvider.ulinkPayment.get('premiumrsp').valueChanges.subscribe(data => {\n      this.setSum();\n    });\n\n    this.ulinkAppDataProvider.ulinkSum.get('ulinkSumArray').valueChanges.subscribe(data => {\n      this.setSum();\n    });\n\n  }\n  \n  /**\n   * ผลลัพธ์การคำนวณเบียประกัน\n   * @param premium\n   */\n  private premiumRider(premium: number)\n  {\n    this.ulinkAppDataProvider.ulinkRider.controls['premium'].setValue(premium);\n    this.ulinkAppDataProvider.riders = this.rider;\n  }\n\n  private setSum()\n  {\n    let rsp = this.ulinkAppDataProvider.ulinkPayment.controls['premiumrsp'].value * 5;\n    let rpp = 0;\n    let arrPay = <FormArray> this.ulinkAppDataProvider.ulinkSum.controls['ulinkSumArray'];\n    if(arrPay.length > 0){\n      let obj : FormGroup = <FormGroup>arrPay.at(0);\n      rpp = obj.controls['realsumrpp'].value;\n    }\n    this.sum = rpp + rsp;\n  }\n\n  private setEditData() {\n\n    //this.loadingCtrl.present();\n    setTimeout(() => {\n      let listExamplerider: Array<ListExampleRider> = this.ulinkAppDataProvider.examBenefit.listExamplerider;\n      for(let data of listExamplerider){\n        let key = data.ridertype;\n        let sum = data.ridersum;\n        let premium = data.riderpremium;\n        this.rider[key].sum = Number(sum);\n        this.rider[key].premium = premium;\n      }\n      //this.loadingCtrl.dismiss();\n    }, 3000);\n    \n  }\n\n  private calAV() {\n    if(typeof this.ulinkAppDataProvider.ulinkWithdraw != 'undefined'){\n      this.ulinkRider.get('value').setValue(this.ulinkAppDataProvider.av);\n    }else {\n\n      let sess_exam_age_pay = Number(this.ulinkAppDataProvider.ulinkPayment.get('endpayyear').value);\n      let sess_exam_agecusto = Number(this.ulinkAppDataProvider.ulinkPayment.get('mAgeend').value);\n      \n      let testSeek = (sess_exam_age_pay+1 > sess_exam_agecusto) ? sess_exam_agecusto : sess_exam_age_pay+1;\n      \n      this.ulinkAppDataProvider.calAvUA02(testSeek);\n\n      this.ulinkRider.get('value').setValue(this.ulinkAppDataProvider.av);\n\n      //old code\n      // if(chkValue(sess_exam_age_pay) && chkValue(sess_exam_agecusto)){\n\t\t\t// \ttestSeek = (formatInt(sess_exam_age_pay)+1 > formatInt(sess_exam_agecusto)) ? formatInt(sess_exam_agecusto) : formatInt(sess_exam_age_pay)+1;\n\t\t\t// }else{\n\t\t\t// \tcallback();\n\t\t\t// \treturn;\n\t\t\t// }\n\n    }\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/investment/ulink-rider/ulink-rider.ts"],"sourceRoot":""}