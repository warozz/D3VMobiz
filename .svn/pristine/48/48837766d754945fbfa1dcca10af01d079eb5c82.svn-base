{"version":3,"sources":["../../src/pages/app-form-e-app/signature-e-app/signature-e-app.module.ts","../../src/pages/app-form-e-app/signature-e-app/signature-e-app.ts","../../src/providers/constants/sign-image-type.ts","../../src/providers/service-table/application-image-model.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignatureEAppPage } from './signature-e-app';\nimport { DirectivesModule } from '../../../directives/directives.module';\nimport { ComponentsModule } from '../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    //SignatureEAppPage,\n  ],\n  imports: [\n    ComponentsModule,\n    DirectivesModule,\n    IonicPageModule.forChild(SignatureEAppPage),\n  ],\n})\nexport class SignatureEAppPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/app-form-e-app/signature-e-app/signature-e-app.module.ts","import {ConstantConfig} from '../../../providers/utility/constant-config';\nimport {Storage} from '@ionic/storage';\nimport { SignImageType } from '../../../providers/constants/sign-image-type';\nimport { FormBuilder, Validators, FormGroup, FormControl} from '@angular/forms';\nimport {ApplicationData} from '../../../providers/application/application-data';\nimport {SignatureComponent} from '../../../components/utility/signature/signature';\nimport {ValidateProvider} from '../../../providers/validate/validate';\nimport { Component } from '@angular/core';\nimport {ModalController, IonicPage,   NavController,   NavParams} from 'ionic-angular';\nimport { ApplicationEAppData } from '../../../providers/application/application-eapp-data';\nimport {ApplicationImageM} from '../../../providers/service-table/application-image-model';\nimport {MCAapplicationsM} from '../../../providers/service-table/mcaapplications-model';\n\n/**\n * Generated class for the SignatureEAppPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-signature-e-app',\n  templateUrl: 'signature-e-app.html',\n})\nexport class SignatureEAppPage {\n  private signs = {};\n  private signed: boolean = false;\n  private accept = false;\n  private quatation: any;\n  private customerName: string;\n  private agentName: string;\n  private signature:FormGroup;\n  private applicationid:string;\n  private applicationImageMs: Array<ApplicationImageM> = [];\n  private mcaapplicationM: MCAapplicationsM;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private modalCtrl: ModalController,\n    private validate: ValidateProvider,\n    private fb: FormBuilder,\n    private storage: Storage,\n    private appData: ApplicationData,\n    private eAppData:ApplicationEAppData) {\n\n      this.signature = this.fb.group({\n        cusSignature:['',Validators.required],\n        applicationid:'',\n        cusName: '',\n        agentName: '',\n        agentSignature:['',Validators.required],\n        place:'',\n        witnessName1:'',//ชื่อ-สกุล\n       // titleWitness1:'',//คำนำหน้า\n        witnessSignature1:['',Validators.required],\n        witnessName2:'',\n       //titleWitness2:'',\n        witnessSignature2:['',Validators.required],\n     \n      });\n\n     this.mcaapplicationM = new MCAapplicationsM();\n     this.eAppData.mcaapplicationM=this.mcaapplicationM;\n     this.eAppData.applicationImageMs = this.applicationImageMs;\n     this.eAppData.signature = this.signature;\n     this.quatation = this.appData.getQuotation();\n      \n     if (this.quatation) {\n\n        this.signature.get('cusName').setValue(this.quatation.pname + ' ' + this.quatation.fname + ' ' + this.quatation.lname); \n        this.signature.get('applicationid').setValue(this.quatation.applicationid);\n        this.applicationid = this.quatation.applicationid;\n\n        this.storage.get(ConstantConfig.SALE_INFO_KEY).then(objM => {\n          if (objM != undefined) {\n            this.signature.get('agentName').setValue( objM['firstName'] + ' ' + objM['lastName'] ); \n          }\n        });\n      }\n\n    this.appData.getData('mcaapplicationM').then((res: MCAapplicationsM) => {\n      \n      let witnessName1 = res.witness1title + ' ' + res.witness1fname + ' ' + res.witness1lname;\n      let witnessName2 = res.witness2title + ' ' + res.witness2fname + ' ' + res.witness2lname;\n      let insurefullname  = res.insuretitle + ' ' + res.insurename + ' ' + res.insurelastname;\n\n      this.signature.get('place').setValue(res.place);\n      this.signature.get('witnessName1').setValue(witnessName1);\n      this.signature.get('witnessName2').setValue(witnessName2);\n      this.signature.get('cusName').setValue(insurefullname);\n\n     \n      });\n  }\n\n  async openSignature(signs, num) {\n    if(this.signed) return;\n    let modal = this.modalCtrl.create(SignatureComponent,'',{cssClass: 'signModel'});\n    modal.onDidDismiss((signData) => {\n      //console.log('signData',signData);\n      if (!this.validate.isEmpty(signData)) {\n\n        let dataBase64 =  signData.substring(signData.indexOf(',')+1);\n        let applicationImageM:ApplicationImageM = new ApplicationImageM();\n        applicationImageM.applicationid =  this.applicationid;\n        applicationImageM.binary = dataBase64;\n        applicationImageM.fileType = \"PNG\";\n        signs[num] = signData; //ค่าจริงที่ใช้โชว์รูป  // decode จาก base64 => binary เพื่อเอาลง base\n        /**\n         * encode จาก binary => base64 เพื่อเอารูปภาพมาโชว์\n         *'data:image/png;base64,'+btoa(atob(signData.substring(signData.indexOf(',')+1)))\n         */\n         if(num === 1){ /// signature1 ส่ง ค่า input    //sign_customer, sign_witness1 = พยานคนที่ 1, sign_witness2 = พยานคนที่ 2, sign_agent\n         \n          this.signature.get('cusSignature').setValue(dataBase64); \n          applicationImageM.imageType = SignImageType.SIGN_CUSTOMER; \n          \n         }\n         if(num === 2){ \n          this.signature.get('witnessSignature1').setValue(dataBase64);\n          applicationImageM.imageType = SignImageType.SIGN_WITNESS1;\n\n         }\n         if(num === 3){ \n          this.signature.get('witnessSignature2').setValue(dataBase64);\n          applicationImageM.imageType = SignImageType.SIGN_WITNESS2; \n         }\n         if(num === 4){ \n          this.signature.get('agentSignature').setValue(dataBase64); \n          applicationImageM.imageType = SignImageType.SIGN_AGENT; \n         }\n\n         this.applicationImageMs.push(applicationImageM);\n      }\n    });\n    modal.present();\n  }\n\n  /*\n  ปุ่มยอมรับ\n  */ \n  private acceptAgreement(): void {\n    this.accept = true;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/app-form-e-app/signature-e-app/signature-e-app.ts","\r\nexport enum SignImageType {\r\n    SIGN_CUSTOMER = <any>\"SIGN_CUSTOMER\", \r\n    SIGN_WITNESS1 = <any>\"SIGN_WITNESS1\", \r\n    SIGN_WITNESS2 = <any>\"SIGN_WITNESS2\", \r\n    SIGN_AGENT = <any>\"SIGN_AGENT\", \r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/providers/constants/sign-image-type.ts","\r\nexport class ApplicationImageM {\r\n\r\n    applicationid: string;\r\n    binary: string;\r\n    fileType: string; \r\n    imageType: any; //Ref ENUM SignImageType\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/service-table/application-image-model.ts"],"sourceRoot":""}