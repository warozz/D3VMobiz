{"version":3,"sources":["../../src/pages/app-form-e-app/payment-e-app/payment-e-app.module.ts","../../src/pages/app-form-e-app/payment-e-app/payment-e-app.ts","../../src/providers/service-table/temp-receipt-model.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PaymentEAppPage } from './payment-e-app';\nimport { ComponentsModule } from '../../../components/components.module';\nimport { DirectivesModule } from '../../../directives/directives.module';\nimport { PipesModule } from '../../../pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    //PaymentEAppPage,\n  ],\n  imports: [\n    ComponentsModule,\n    DirectivesModule,\n    PipesModule,\n    IonicPageModule.forChild(PaymentEAppPage),\n  ],\n})\nexport class PaymentEAppPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/app-form-e-app/payment-e-app/payment-e-app.module.ts","import { Storage } from '@ionic/storage';\nimport { ConstantConfig } from '../../../providers/utility/constant-config';\nimport { LoadingDirective } from '../../../directives/extends/loading/loading';\nimport { ConfigAPI } from '../../../providers/constants/config-api';\nimport { ServiceName } from '../../../providers/constants/service-name';\nimport { Component, NgZone } from '@angular/core';\nimport { AlertController, IonicPage,  NavController,  NavParams,  Platform} from 'ionic-angular';\nimport { ApplicationData } from '../../../providers/application/application-data';\nimport { ApiProvider } from '../../../providers/api/api';\nimport * as moment from 'moment';\nimport { ApplicationEAppData } from '../../../providers/application/application-eapp-data';\nimport { PaymentM } from '../../../providers/service-table/payment-model';\nimport { RequestModel } from '../../../providers/model/request-model';\nimport { FunctionName } from '../../../providers/constants/function-name';\nimport { AlertDirective } from '../../../directives/extends/alert/alert';\nimport { TempReceiptM } from '../../../providers/service-table/temp-receipt-model';\nimport { Broadcaster } from '../../../providers/utility/broadcaster';\nimport { DateFormatProvider } from '../../../providers/date-format/date-format';\nimport { ApplicationpdfM } from '../../../providers/service-table/application-pdf-model';\nimport { Market } from '@ionic-native/market';\n\n/**\n * Generated class for the PaymentEAppPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n(window as any).handleOpenURL = (url:string)=>{\n  (window as any).handleOpenURL_LastURL = url;\n};\n\n\n@IonicPage()\n@Component({\n  selector: 'page-payment-e-app',\n  templateUrl: 'payment-e-app.html',\n})\n\nexport class PaymentEAppPage {\n\n  private mPosSuccess: Boolean = false;\n  private paymentForm = [];\n  private dateCurrent: string | Date | number;\n  private money: number = 0;\n  private paymentslipno: string;\n  private dateSuccess: string | Date | number;\n  private pName: string;\n  private fName: string;\n  private lName: string;\n  private bankCode : string;\n  private amountMPOS: string;\n\n  constructor(\n    private loadingCtrl: LoadingDirective,\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private appsData: ApplicationData,\n    private apiProvider: ApiProvider,\n    private applicationData: ApplicationData,\n    private alertCtrl: AlertDirective,\n    public  alertCtrl2: AlertController,\n    private broadcaster: Broadcaster,\n    public appEAppData: ApplicationEAppData,\n    private ngZone: NgZone,\n    private platform: Platform,\n    private dateFormat :DateFormatProvider,\n    private storage: Storage,\n    private market: Market\n  ) {\n    \n    //ชื่อ นามสกุล\n    this.pName = this.appsData.quotation.pname;\n    this.fName = this.appsData.quotation.fname;\n    this.lName = this.appsData.quotation.lname;\n    //ช่องทาง\n    this.paymentForm = [{'form':'mPos'}]; \n   \n    this.dateCurrent = this.dateFormat.dateFormatShotTh1(moment( Date.now()).format(\"YYYY-MM-DD HH:mm:ss\"), \"S\");\n    \n\n\n    let epaypremium = this.epaypremium( this.appsData.quotation.typeapp , this.appsData.quotation.mode  , this.appsData.quotation.totalpremium ) ;\n   \n    //จำนวนเงิน\n    this.money = epaypremium ;//this.appsData.quotation.totalpremium ? Number(this.appsData.quotation.totalpremium) : 0;\n    \n    /**\n     * จำนวนเงินที่ส่งไปยังเครื่อง MPOS\n     */\n    this.amountMPOS = String(epaypremium);//this.appsData.quotation.totalpremium == \"\" ? '0' : this.appsData.quotation.totalpremium;\n   \n    //เลขที่ใบรับเงินชั่วคราว\n    this.paymentslipno = \"\";\n    \n    //ค่าเริ่มต้น วันที่ชำระเงิน\n    this.dateSuccess = this.dateFormat.dateFormatThAndShowTime(moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\"), \"S\", true);\n    \n    this.requestTempReceiptNo();\n\n    (window as any).handleOpenURL = (url: string) => {\n      // this context is called outside of angular zone!\n      setTimeout(() => {\n        // so we need to get back into the zone..\n        this.ngZone.run(() => {\n           // this is in the zone again..\n           this.handleOpenUrl(url);\n        });\n      }, 0);\n    };\n\n    // check if app was opened by custom url scheme\n    const lastUrl: string = (window as any).handleOpenURL_LastURL || \"\";\n    if (lastUrl && lastUrl !== \"\") {\n      delete (window as any).handleOpenURL_LastURL;\n      this.handleOpenUrl(lastUrl);\n    }\n\n  }\n  public epaypremium(typeapp : string , modepay : string , premiumpay : string ) {\n    if (typeapp == \"PER\" && modepay == \"0\" )\n      return  Number(premiumpay)*2;\n    else\n      return  Number(premiumpay);\n}\n\n  private handleOpenUrl(url: string) {\n\n    let obj = this.getAllUrlParams(url);\n    let invoice =  obj['invoice'];\n    let amount =  obj['amount'];\n    let customer_email=  obj['customer_email'];\n    let mobile =  obj['mobile'];\n    let order_info = obj['order_info'];\n    let auth_code = obj['auth_code'];\n    let transaction_response_code=  obj['transaction_response_code'];\n    let transaction_number = obj['transaction_number'];\n    let transaction_ref =  obj['transaction_ref'];\n    let Merchant_Name = obj['Merchant_Name'];\n    let card_type = obj['card_type'];\n    let cc_name = obj['cc_name'];\n    let cc_number = obj['cc_number'];\n    let currency = obj['currency'];\n    let ref_1 =  obj['ref_1'];\n    let ref_2 = obj['ref_2'];\n    let ref_3 = obj['ref_3'];\n    let ref_4 = obj['ref_4'];\n    let TSI= obj['TSI'];\n    let TVR = obj['TVR'];\n    let CVMResult = obj['CVMResult'];\n\n    if ( obj['transaction_response_code'] == \"0\" && (obj['transaction_number'] != '' && obj['transaction_number'] != undefined)) {\n\n      this.appEAppData.isPurchaseComplete = true;\n      this.mPosSuccess = true;\n      let jsonDataObj = {};\n      jsonDataObj['transactionNumber'] = transaction_number;\n      jsonDataObj['transactionFef'] = transaction_ref;\n      jsonDataObj['orderInfo'] = order_info;\n      jsonDataObj['cardType'] = card_type;\n      jsonDataObj['ccName'] = cc_name;\n      jsonDataObj['ccNumber'] = cc_number;\n      jsonDataObj['TSI'] = TSI;\n      jsonDataObj['TVR'] = TVR;\n\n      let jsonData :any = jsonDataObj;\n\n      this.alertCtrl.warning('ชำระเงินเรียบร้อย');\n\n      this.dateSuccess = this.dateFormat.dateFormatThAndShowTime(moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\"), \"S\", true);\n      this.broadcaster.broadcast('dateSubmitAppForm', this.dateSuccess);\n\n      this.setPayment(jsonData);\n      this.broadcaster.broadcast('paymentStatus','01');\n      this.setPaymentStatus(\"01\", jsonData);\n    }\n    else {\n      this.alertCtrl.warning('ชำระเงินไม่สำเร็จ');\n      this.mPosSuccess = false;\n      this.setPaymentStatus(\"02\", undefined);\n      this.broadcaster.broadcast('paymentStatus','02');\n    }\n\n   }\n\n  private getAllUrlParams(url) {\n    var queryString = url ? url.split('?')[1] : window.location.search.slice(1);\n    var obj = {};\n    if (queryString) {\n      queryString = decodeURI(queryString);\n      queryString = queryString.split('#')[0];\n      var arr = queryString.split('&');\n      for (var i=0; i<arr.length; i++) {\n        var a = arr[i].split('=');\n        var paramNum = undefined;\n        var paramName = a[0].replace(/\\[\\d*\\]/, function(v) {\n          paramNum = v.slice(1,-1);\n          return '';\n        });\n        var paramValue = typeof(a[1])==='undefined' ? true : a[1];\n        paramName = paramName.toLowerCase();\n        paramValue = paramValue.toLowerCase();\n        if (obj[paramName]) {\n          if (typeof obj[paramName] === 'string') {\n            obj[paramName] = [obj[paramName]];\n          }\n          if (typeof paramNum === 'undefined') {\n            obj[paramName].push(paramValue);\n          }\n          else {\n            obj[paramName][paramNum] = paramValue;\n          }\n        }\n        else {\n          obj[paramName] = paramValue;\n        }\n      }\n    }\n    return obj;\n  }\n\n  public requestTempReceiptNo() {\n\n    let objM: TempReceiptM = new TempReceiptM();\n    let objMs: Array<TempReceiptM> = [];\n    objMs.push(objM);\n    \n    let reqM: RequestModel = new RequestModel();\n    reqM.functionName = FunctionName.TEMP_RECEIPTNO;\n    reqM.param = objMs;\n    \n    this.apiProvider.callData(reqM).then(\n      (res) => {\n        if(res['size'] && res['size'] > 0) {\n          this.paymentslipno = res['data'][0].tempRpNo;\n        }\n      },\n      (err) => {\n        console.log(err);\n      }\n    );\n  }\n\n  async requestMPOS() {\n\n    if (typeof(this.bankCode) === 'undefined' || this.bankCode == '') {\n        this.alertCtrl.warning(\"กรุณาเลือกบัตรเครดิต\");\n        return ;\n    }\n    /**\n     * \n     */\n    // this.appEAppData.isPurchaseComplete = true;\n    // this.mPosSuccess = true;\n    // this.alertCtrl.warning('ชำระเงินเรียบร้อย');\n    // this.dateSuccess = this.dateFormat.dateFormatShotTh1(moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\"), \"S\");\n\n    // this.broadcaster.broadcast('paymentStatus', '01');\n    // this.setPaymentStatus(\"01\", null);\n     /**\n      * \n      */\n\n    let saleInfoM: any = await this.storage.get(ConstantConfig.SALE_INFO_KEY);\n    console.log('------------ requestMPOS : param saleInfoM----------', JSON.stringify(saleInfoM));\n\n    let param: any = {\n      \"package\" : \"com.bay.mpos\", \n      \"customer_email_ne\" : this.appEAppData.emailCustomer,\n      \"mobile_ne\" : this.appsData.quotation.prospectM.mobilephone,\n      \"amount_ne\" : this.amountMPOS,\n      \"source\" : \"io.ionic.starter\",\n      \"command\" : \"pay\",\n      \"ref_1_ne\" : this.paymentslipno,\n      \"ref_2_ne\" : saleInfoM['depositNo'] != undefined ? saleInfoM['depositNo'] : '' ,\n      \"ref_3_ne\" : \"01/01\",\n      \"ref_4_ne\" : \"\"\n    };\n\n    console.log('------------ requestMPOS : param ----------', param);\n\n    if (this.platform.is('ios')) {\n\n        param['amount_ne'] = param['amount_ne']+=\"00\"; \n\n        this.callQuickPayIOS(param).then((res)=> { \n\n       }, \n       (err) => {\n\n        const prompt = this.alertCtrl2.create({\n          title: 'Error',\n          message: \"Krungsri QuickPay not install on your phone.\",\n          cssClass: 'alertCustomCss',\n          buttons: [\n            {\n              text: 'Close'\n            },\n            {\n              text: 'Install',\n              handler: data => {\n                (window as any).cordova.plugins.market.open('krungsri-quick-pay/id563457247');\n              }\n            }\n          ]\n        });\n        prompt.present();\n\n      });\n\n    } \n    else if (this.platform.is('android')) {\n\n      this.callQuickPay(param).then((res) => {\n        if (res != undefined && '' != res && 'OK' != res) {\n\n          this.appEAppData.isPurchaseComplete = false;\n        \n          let data: any = res; \n          let jsonData: any = JSON.parse(data);\n    \n          if (jsonData.transactionFef != '' && jsonData.transactionFef != undefined \n              && (jsonData.transactionNumber != '' && jsonData.transactionNumber != undefined)) { \n            \n            this.appEAppData.isPurchaseComplete = true;\n            this.mPosSuccess = true;\n            this.alertCtrl.warning('ชำระเงินเรียบร้อย');\n\n            this.dateSuccess = this.dateFormat.dateFormatThAndShowTime(moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\"), \"S\", true);\n            this.broadcaster.broadcast('dateSubmitAppForm', this.dateSuccess);\n\n            this.setPayment(jsonData);\n            this.broadcaster.broadcast('paymentStatus', '01');\n            this.setPaymentStatus(\"01\", jsonData);\n          }\n          else {\n            this.alertCtrl.warning('ชำระเงินไม่สำเร็จ');\n            this.mPosSuccess = false;\n            this.setPaymentStatus(\"02\", undefined);\n            this.broadcaster.broadcast('paymentStatus', '02');\n          }\n\n        }\n        else {\n          const prompt = this.alertCtrl2.create({\n            title: 'Error',\n            message: \"Krungsri QuickPay not install on your phone.\",\n            cssClass: 'alertCustomCss',\n            buttons: [\n              {\n                text: 'Close'\n              },\n              {\n                text: 'Install',\n                handler: data => {\n                  var appId = 'com.bay.mpos';\n                  (window as any).cordova.plugins.market.open(appId);\n                  prompt.dismiss;\n                }\n              }\n            ]\n          }); \n          prompt.present();\n        }\n        \n      }, (err) => {\n        this.alertCtrl.warning('ชำระเงินไม่สำเร็จ');\n        this.mPosSuccess = false;\n        this.broadcaster.broadcast('paymentStatus', '02');\n        this.setPaymentStatus(\"02\", undefined);\n      });\n\n    }\n    \n  }\n\n  public callQuickPay(param: any) {\n\n    return new Promise((resolve, reject) => {\n     \n      (window as any).cordova.plugins.quickpay.launchApp(param, {\n        success: function(res) {\n          resolve(res);\n        },\n        error: function(err) {\n          reject(err);\n        }\n      })\n\n    });\n    \n  } \n\n  public callQuickPayIOS(param: any) {\n\n    return new Promise((resolve, reject) => {\n     \n      let appId = encodeURI('goswiff-bay://pay?command=pay&customer_email_ne='+param['customer_email_ne']+'&mobile_ne='+param['mobile_ne']+'&amount_ne='+param['amount_ne']+'&ref_1_ne='+param['ref_1_ne']+'&ref_2_ne='+param['ref_2_ne']+'&ref_3_ne='+param['ref_3_ne']+'&ref_4_ne='+param['ref_4_ne']+'&return='+ ConfigAPI.CONFIG_VALUE1 +'://');\n      let appStarter = (window as any).startApp.set(appId);\n\n      appStarter.start(function (msg) {\n        resolve(msg);\n      }, function (err) {\n        reject(err);\n      });\n\n    });\n    \n  } \n\n  setPayment(res) {\n    \n    //console.log(res + \" << XXXXXXXXXX >> \" + JSON.stringify(res));\n    //alert(res + \" << XXXXXXXXXX >> \" + JSON.stringify(res));\n    \n    let paymentM: PaymentM  = new PaymentM();\n        paymentM.amount = this.appsData.quotation.totalpremium || 0;\n        paymentM.paydate = moment().format('YYYY-MM-DD HH:mm:ss');\n        paymentM.paymentslipno = this.paymentslipno;\n        paymentM.transactionnumber = res.transactionNumber;\n        paymentM.transactionref = res.transactionFef;\n        paymentM.orderinfo = res.orderInfo;\n        paymentM.cardtype = res.cardType;\n        paymentM.ccname = res.ccName;\n        paymentM.ccnumber = res.ccNumber;\n        paymentM.bankcode = res.TSI;\n        paymentM.creditcardno = res.TVR;\n        \n        //alert(paymentM + \"  \"+JSON.stringify(paymentM));\n\n    this.appEAppData.paymentM = paymentM;\n  }\n\n  /**\n   * @see payment_step update database \n   * => gen receipt's pdf for save to alfresco and sent email \n   * => gen application's pdf for save to alfresco\n   * @param status \n   * @param res \n   */\n  public setPaymentStatus(status: string, res: any) {\n\n    let objM: PaymentM = new PaymentM();\n    objM.applicationid = this.applicationData.getApplicationId();  //Require = Y\n    objM.paymentstatus = status;\n    objM.paymentslipno = this.paymentslipno;\n    objM.paydate = moment().format('YYYY-MM-DD HH:mm:ss');\n    \n    if (res != undefined && res != null) {\n      objM.transactionnumber = res.transactionNumber;\n      objM.transactionref = res.transactionFef;\n      objM.orderinfo = res.orderInfo;\n      objM.paymentslipno = this.paymentslipno;\n      objM.cardtype = res.cardType;\n      objM.ccname = res.ccName;\n      objM.ccnumber = res.ccNumber;\n      //objM.bankcode = res.TSI + '|' + res.TVR;\n      objM.amount = this.amountMPOS;\n      objM.bankcode = this.bankCode;\n    }\n    \n    let objMs: Array<PaymentM> = [];\n    objMs.push(objM);\n\n    let reqM: RequestModel = new RequestModel();\n    reqM.functionName = FunctionName.PAYMENT;\n    reqM.serviceName = ServiceName.UPDATE;\n    reqM.searchkey = \"PAYMENT_STATUS\";\n    reqM.param = objMs;\n\n    this.apiProvider.callData(reqM).then(\n      async (res) => {\n\n        if ('01' === status) {\n\n          let loading = this.loadingCtrl.scopePresent();\n          this.appEAppData.insertApplicationEAppData(\"SUMBIT_NBAPP\").then(\n            async (res) => {\n\n              console.log('insertApplicationEAppData : res = ', res);\n\n              this.loadingCtrl.scopeDismiss(loading);\n              \n              if ('N' === res['data'][0].responseCode) {\n                this.alertCtrl.warning(res['data'][0].responseMsg + ConstantConfig.NB_APP_WARNING_N);\n              }\n            \n              await this.callSaveFileToAlfresco();\n            },\n            async (err) => {\n\n              this.loadingCtrl.scopeDismiss(loading);\n              console.log(\"error : \" + JSON.stringify(err));\n\n              this.alertCtrl.warning(ConstantConfig.NB_APP_WARNING_TIMEOUT);\n\n              await this.callSaveFileToAlfresco();\n            }\n          );\n         \n        }\n        \n      },\n      (err) => {\n        console.log(err);\n      }\n    );\n  }  \n\n  /** \n   * บันทึก pdf ใบคำขอ ลง alfresco server\n  */\n  private async callSaveFileToAlfresco() {\n\n    let objM: ApplicationpdfM = new ApplicationpdfM();\n    objM.applicationid = this.applicationData.getApplicationId();\n    objM.saveAlfrescoStatus = 'payment';\n    let objMs: Array<ApplicationpdfM> = [];\n    objMs.push(objM);\n    \n    let reqM: RequestModel = new RequestModel();\n    reqM.functionName = FunctionName.APPLICATION_PDF_ALFRESCO;\n    reqM.param = objMs;\n    \n    await this.apiProvider.callData(reqM).then(\n      async (res) => {\n        console.log('finish save callSaveFileToAlfresco()');\n\n      },async (err) => {\n        console.log('Error save callSaveFileToAlfresco()');\n        this.alertCtrl.error(err); \n      }\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/app-form-e-app/payment-e-app/payment-e-app.ts","\r\nexport class TempReceiptM {\r\n    tempRpNo: string;\r\n    salesID: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/service-table/temp-receipt-model.ts"],"sourceRoot":""}