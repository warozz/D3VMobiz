{"version":3,"sources":["../../src/pages/quatation-report/quatation-report.module.ts","../../src/pages/quatation-report/quatation-report.ts"],"names":[],"mappings":"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","file":"32.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { QuatationReportPage } from './quatation-report';\nimport { DirectivesModule } from '../../directives/directives.module';\nimport { PipesModule } from '../../pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    QuatationReportPage,\n  ],\n  imports: [\n    ComponentsModule,\n    DirectivesModule,\n    PipesModule,\n    IonicPageModule.forChild(QuatationReportPage),\n  ],\n})\nexport class QuatationReportPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/quatation-report/quatation-report.module.ts","import { Storage } from '@ionic/storage';\nimport { Component, OnInit } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport * as moment from 'moment';\nimport { QuotationprintlogM } from '../../providers/service-table/quotationprintlog-model';\nimport { RequestModel } from '../../providers/model/request-model';\nimport { FunctionName } from '../../providers/constants/function-name';\nimport { ServiceName } from '../../providers/constants/service-name';\nimport { ApiProvider } from '../../providers/api/api';\nimport { AlertDirective } from '../../directives/extends/alert/alert';\n\n/**\n * Generated class for the QuatationReportPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  segment: 'รายงานการพิมพ์ใบเสนอขายราบบุคคล'\n})\n@Component({\n  selector: 'page-quatation-report',\n  templateUrl: 'quatation-report.html',\n})\nexport class QuatationReportPage {\n\n  private listLogType = [\n    {\n      id: 1,\n      text: 'รายงานการพิมพ์ใบเสนอขาย (รายบุคคล)'\n    }\n  ];\n  private list = [];\n  private formatDate: string = \"YYYY-MM-DD\";\n  private sum: number;\n  private selectedColor: number = 0;\n  private startDate: string = moment().format(this.formatDate);\n  private endDate: string = moment().format(this.formatDate);\n  private maxStartDate: string;\n  private minEndDate: string;\n  /*\n  *paging\n  */\n  private allItems: any[];\n  private pagedItems: any[];\n  private pager: any = {};\n  private pageSize: number = 5;\n  private currentPage: number = 1;\n  private totalPage: number;\n  private flagSort: boolean;\n\n  /*\n  *sorting\n  */\n  private isDesc: boolean = false;\n  private column: string = '';\n  private direction: number;\n  private sortingFlag: string = '';\n  private branchcode : string = '';\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public apiProvider: ApiProvider,\n    public alertCtrl: AlertDirective,\n    public storage :Storage,\n  ) {\n    this.changePage(1);\n    this.storage.get('loginProfile').then(profile => {\n      //this.branchcode = profile.ou;\n      if(typeof(profile.ou) !== 'undefined'){\n        let b = profile.ou.split('bra');\n        if(b.length == 2){\n          //alert(b[1]);\n          this.branchcode  = b[1];\n          \n        }else{\n          this.branchcode = '';\n        }\n      }\n    });\n  }\n\n  private callLogList() {\n    if (!this.startDate || !this.endDate) {\n      this.alertCtrl.warning('กรุณากรอกข้อมูลให้ครบถ้วน');\n      return;\n    }\n\n    let objM: QuotationprintlogM = new QuotationprintlogM();\n    objM.fromdate = this.startDate; //Require = Y\n    objM.todate = this.endDate; //Require = Y\n    objM.branchcode = this.branchcode;\n    objM.branchname = '';\n    objM.userid = '';\n    objM.usertype = '';\n    objM.seq = '';\n    objM.devicerefno = '';\n\n    let objMs: Array<QuotationprintlogM> = [];\n    objMs.push(objM);\n\n    let reqM: RequestModel = new RequestModel();\n    reqM.functionName = FunctionName.QUOTATION_PRINTLOG;\n    reqM.serviceName = ServiceName.SELECT;\n    reqM.searchkey = 'report1';\n    reqM.param = objMs;\n\n    this.apiProvider.callData(reqM).then((res) => {\n        let datas = <any>res;\n        console.log(res);\n        this.list = [...datas.data];\n       \n        this.sum = this.list.reduce((prevVal, elem) => prevVal + elem.amt, 0);\n      },(err) => {\n        console.log(JSON.stringify(err));\n      }\n    );\n\n  }\n\n  itemSelected(id): void {\n    this.selectedColor = Number(id);\n  }\n\n  changePageSize(value): void {\n    this.pageSize = Number(value);\n    this.totalPage = Math.ceil(this.list.length / this.pageSize);\n  }\n\n  changePage(page: number): void {\n    this.totalPage = Math.ceil(this.list.length / this.pageSize);\n    this.totalPage = this.totalPage === 0 ? 1 : this.totalPage;\n    if (page < 1) {\n      return;\n    } else if (page > this.totalPage) {\n      page = this.totalPage;\n    }\n    this.currentPage = page;\n    this.flagSort = !this.flagSort;\n  }\n\n  sort(property, option): void {\n\n    if (this.column != property) {\n      this.isDesc = false;\n      this.sortingFlag = 'asc'\n    }\n    this.isDesc = !this.isDesc;\n    this.column = property;\n    this.direction = this.isDesc ? 1 : -1;\n    if (this.direction == -1) {\n      this.sortingFlag = 'desc'\n    } else if (this.direction == 1) {\n      this.sortingFlag = 'asc'\n    }\n    this.changePage(this.currentPage);\n  }\n\n  changeMinEndDate(date) {\n    this.minEndDate = date;\n    if (!this.endDate\n      || typeof this.endDate != 'string'\n      || (typeof this.endDate == 'string' && this.endDate.length <= 0)\n    ) {\n      this.endDate = date;\n    }\n    this.maxStartDate = this.endDate;\n  }\n\n  changeMaxStartDate(date) {\n    this.maxStartDate = date;\n    if (!this.startDate\n      || typeof this.startDate != 'string'\n      || (typeof this.startDate == 'string' && this.startDate.length <= 0)\n    ) {\n      this.startDate = date;\n    }\n    this.minEndDate = this.startDate;\n  }\n\n  // back() {\n  //   this.navCtrl.pop();\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/quatation-report/quatation-report.ts"],"sourceRoot":""}